# 06.游戏中地形大气和云的渲染（上）

![渲染美丽的大自然！](06%20%E6%B8%B8%E6%88%8F%E4%B8%AD%E5%9C%B0%E5%BD%A2%E5%A4%A7%E6%B0%94%E5%92%8C%E4%BA%91%E7%9A%84%E6%B8%B2%E6%9F%93%EF%BC%88%E4%B8%8A%EF%BC%89/Untitled.png)

渲染美丽的大自然！

![荒野大镖客中美轮美奂的世界](06%20%E6%B8%B8%E6%88%8F%E4%B8%AD%E5%9C%B0%E5%BD%A2%E5%A4%A7%E6%B0%94%E5%92%8C%E4%BA%91%E7%9A%84%E6%B8%B2%E6%9F%93%EF%BC%88%E4%B8%8A%EF%BC%89/Untitled%201.png)

荒野大镖客中美轮美奂的世界

![但我们的游戏场景无论天空、云、植被还是地形表现都很差。](06%20%E6%B8%B8%E6%88%8F%E4%B8%AD%E5%9C%B0%E5%BD%A2%E5%A4%A7%E6%B0%94%E5%92%8C%E4%BA%91%E7%9A%84%E6%B8%B2%E6%9F%93%EF%BC%88%E4%B8%8A%EF%BC%89/Untitled%202.png)

但我们的游戏场景无论天空、云、植被还是地形表现都很差。

---

# 绘制地形

## 地形的几何

![Untitled](06%20%E6%B8%B8%E6%88%8F%E4%B8%AD%E5%9C%B0%E5%BD%A2%E5%A4%A7%E6%B0%94%E5%92%8C%E4%BA%91%E7%9A%84%E6%B8%B2%E6%9F%93%EF%BC%88%E4%B8%8A%EF%BC%89/Untitled%203.png)

![微软模拟飞行的地球地形高达1TB.](06%20%E6%B8%B8%E6%88%8F%E4%B8%AD%E5%9C%B0%E5%BD%A2%E5%A4%A7%E6%B0%94%E5%92%8C%E4%BA%91%E7%9A%84%E6%B8%B2%E6%9F%93%EF%BC%88%E4%B8%8A%EF%BC%89/Untitled%204.png)

微软模拟飞行的地球地形高达1TB.

![无人深空中的非真实地形](06%20%E6%B8%B8%E6%88%8F%E4%B8%AD%E5%9C%B0%E5%BD%A2%E5%A4%A7%E6%B0%94%E5%92%8C%E4%BA%91%E7%9A%84%E6%B8%B2%E6%9F%93%EF%BC%88%E4%B8%8A%EF%BC%89/Untitled%205.png)

无人深空中的非真实地形

## 高度场地形

![Untitled](06%20%E6%B8%B8%E6%88%8F%E4%B8%AD%E5%9C%B0%E5%BD%A2%E5%A4%A7%E6%B0%94%E5%92%8C%E4%BA%91%E7%9A%84%E6%B8%B2%E6%9F%93%EF%BC%88%E4%B8%8A%EF%BC%89/Untitled%206.png)

最简单的想法：高度图 等高线图

![有了Heightfield渲染地形就很简单](06%20%E6%B8%B8%E6%88%8F%E4%B8%AD%E5%9C%B0%E5%BD%A2%E5%A4%A7%E6%B0%94%E5%92%8C%E4%BA%91%E7%9A%84%E6%B8%B2%E6%9F%93%EF%BC%88%E4%B8%8A%EF%BC%89/Untitled%207.png)

有了Heightfield渲染地形就很简单

![使用这种方法细分地形对每块进行计算材质。](06%20%E6%B8%B8%E6%88%8F%E4%B8%AD%E5%9C%B0%E5%BD%A2%E5%A4%A7%E6%B0%94%E5%92%8C%E4%BA%91%E7%9A%84%E6%B8%B2%E6%9F%93%EF%BC%88%E4%B8%8A%EF%BC%89/Untitled%208.png)

使用这种方法细分地形对每块进行计算材质。

![Untitled](06%20%E6%B8%B8%E6%88%8F%E4%B8%AD%E5%9C%B0%E5%BD%A2%E5%A4%A7%E6%B0%94%E5%92%8C%E4%BA%91%E7%9A%84%E6%B8%B2%E6%9F%93%EF%BC%88%E4%B8%8A%EF%BC%89/Untitled%209.png)

但是在几公里甚至几十公里的开放世界游戏中，这种数据量是庞大的，我们首先想到的同样是近大远小，光敏感度等LOD原理，但是有个问题：**地形和OBject不同的是，地形是连续的。因此地形的LOD需要用心设计。**

![根据摄像机FOV进行细分。](06%20%E6%B8%B8%E6%88%8F%E4%B8%AD%E5%9C%B0%E5%BD%A2%E5%A4%A7%E6%B0%94%E5%92%8C%E4%BA%91%E7%9A%84%E6%B8%B2%E6%9F%93%EF%BC%88%E4%B8%8A%EF%BC%89/Untitled%2010.png)

根据摄像机FOV进行细分。

FOV越来越窄的时候三角面越密：当FOV缩小时，屏幕上的地形会越来越大（举例：4~8倍镜就是把FOV变小）。

![地形简化的两条原则](06%20%E6%B8%B8%E6%88%8F%E4%B8%AD%E5%9C%B0%E5%BD%A2%E5%A4%A7%E6%B0%94%E5%92%8C%E4%BA%91%E7%9A%84%E6%B8%B2%E6%9F%93%EF%BC%88%E4%B8%8A%EF%BC%89/Untitled%2011.png)

地形简化的两条原则

一条是FOV和摄像机距离

另一条是和预计算地形的差值（举例：1000米以外地形有差10cm根本注意不到）。

![让地形疏密相间的方法：三角面细分（在等腰直角三角形的最长边上切一刀）（本质上是一个二叉树结构）；高亮区域就是FOV可视区域。](06%20%E6%B8%B8%E6%88%8F%E4%B8%AD%E5%9C%B0%E5%BD%A2%E5%A4%A7%E6%B0%94%E5%92%8C%E4%BA%91%E7%9A%84%E6%B8%B2%E6%9F%93%EF%BC%88%E4%B8%8A%EF%BC%89/Untitled%2012.png)

让地形疏密相间的方法：三角面细分（在等腰直角三角形的最长边上切一刀）（本质上是一个二叉树结构）；高亮区域就是FOV可视区域。

![T-Junctions  基于二叉树的思想，连续划分三角形，防止误差（误差原因：相邻的mesh切分的密度不同，会导致三角面破裂）。](06%20%E6%B8%B8%E6%88%8F%E4%B8%AD%E5%9C%B0%E5%BD%A2%E5%A4%A7%E6%B0%94%E5%92%8C%E4%BA%91%E7%9A%84%E6%B8%B2%E6%9F%93%EF%BC%88%E4%B8%8A%EF%BC%89/Untitled%2013.png)

T-Junctions  基于二叉树的思想，连续划分三角形，防止误差（误差原因：相邻的mesh切分的密度不同，会导致三角面破裂）。

![在Unity中使用这种方法表达54*54KM的地形，跑在GPU上！](06%20%E6%B8%B8%E6%88%8F%E4%B8%AD%E5%9C%B0%E5%BD%A2%E5%A4%A7%E6%B0%94%E5%92%8C%E4%BA%91%E7%9A%84%E6%B8%B2%E6%9F%93%EF%BC%88%E4%B8%8A%EF%BC%89/Untitled%2014.png)

在Unity中使用这种方法表达54*54KM的地形，跑在GPU上！

缺点：对地形数据的管理和算法不符合直觉。

![现代游戏引擎中对地形管理更符合直觉的表达：四叉树](06%20%E6%B8%B8%E6%88%8F%E4%B8%AD%E5%9C%B0%E5%BD%A2%E5%A4%A7%E6%B0%94%E5%92%8C%E4%BA%91%E7%9A%84%E6%B8%B2%E6%9F%93%EF%BC%88%E4%B8%8A%EF%BC%89/Untitled%2015.png)

现代游戏引擎中对地形管理更符合直觉的表达：四叉树

优点：结构简单规整；

便于地理空间下的数据管理，比如数据流和对象剔除。

缺点：细分不如三角面灵活；

子节点和面级别要一致。

![四种地形处理方式；最推荐右下角的四叉树方法。](06%20%E6%B8%B8%E6%88%8F%E4%B8%AD%E5%9C%B0%E5%BD%A2%E5%A4%A7%E6%B0%94%E5%92%8C%E4%BA%91%E7%9A%84%E6%B8%B2%E6%9F%93%EF%BC%88%E4%B8%8A%EF%BC%89/Untitled%2016.png)

四种地形处理方式；最推荐右下角的四叉树方法。

![四边面中同样要计算T-Junctions；相邻的Mesh密度不同就把密的那一点向上/向下吸附，面积为0的三角形，无影响（退化三角形）。](06%20%E6%B8%B8%E6%88%8F%E4%B8%AD%E5%9C%B0%E5%BD%A2%E5%A4%A7%E6%B0%94%E5%92%8C%E4%BA%91%E7%9A%84%E6%B8%B2%E6%9F%93%EF%BC%88%E4%B8%8A%EF%BC%89/Untitled%2017.png)

四边面中同样要计算T-Junctions；相邻的Mesh密度不同就把密的那一点向上/向下吸附，面积为0的三角形，无影响（退化三角形）。

![Quad Tree四叉树方法渲染的地形 孤岛惊魂5](06%20%E6%B8%B8%E6%88%8F%E4%B8%AD%E5%9C%B0%E5%BD%A2%E5%A4%A7%E6%B0%94%E5%92%8C%E4%BA%91%E7%9A%84%E6%B8%B2%E6%9F%93%EF%BC%88%E4%B8%8A%EF%BC%89/Untitled%2018.png)

Quad Tree四叉树方法渲染的地形 孤岛惊魂5

![不规则三角形表达地形](06%20%E6%B8%B8%E6%88%8F%E4%B8%AD%E5%9C%B0%E5%BD%A2%E5%A4%A7%E6%B0%94%E5%92%8C%E4%BA%91%E7%9A%84%E6%B8%B2%E6%9F%93%EF%BC%88%E4%B8%8A%EF%BC%89/Untitled%2019.png)

不规则三角形表达地形

![不规则三角方法上优化的密度变异算法（图为一个超大的沙漠地形）](06%20%E6%B8%B8%E6%88%8F%E4%B8%AD%E5%9C%B0%E5%BD%A2%E5%A4%A7%E6%B0%94%E5%92%8C%E4%BA%91%E7%9A%84%E6%B8%B2%E6%9F%93%EF%BC%88%E4%B8%8A%EF%BC%89/Untitled%2020.png)

不规则三角方法上优化的密度变异算法（图为一个超大的沙漠地形）

![均匀采样和重要性采样](06%20%E6%B8%B8%E6%88%8F%E4%B8%AD%E5%9C%B0%E5%BD%A2%E5%A4%A7%E6%B0%94%E5%92%8C%E4%BA%91%E7%9A%84%E6%B8%B2%E6%9F%93%EF%BC%88%E4%B8%8A%EF%BC%89/Untitled%2021.png)

均匀采样和重要性采样

优点：实时计算简单；

用了更少的面。

缺点：需要预计算；

难以更改。

---

## GPU细分

![GPU计算细分.gif](06%20%E6%B8%B8%E6%88%8F%E4%B8%AD%E5%9C%B0%E5%BD%A2%E5%A4%A7%E6%B0%94%E5%92%8C%E4%BA%91%E7%9A%84%E6%B8%B2%E6%9F%93%EF%BC%88%E4%B8%8A%EF%BC%89/GPU%E8%AE%A1%E7%AE%97%E7%BB%86%E5%88%86.gif)

![如今主流的硬件细分流程](06%20%E6%B8%B8%E6%88%8F%E4%B8%AD%E5%9C%B0%E5%BD%A2%E5%A4%A7%E6%B0%94%E5%92%8C%E4%BA%91%E7%9A%84%E6%B8%B2%E6%9F%93%EF%BC%88%E4%B8%8A%EF%BC%89/Untitled%2022.png)

如今主流的硬件细分流程

![一切都是为了subdivision做的事](06%20%E6%B8%B8%E6%88%8F%E4%B8%AD%E5%9C%B0%E5%BD%A2%E5%A4%A7%E6%B0%94%E5%92%8C%E4%BA%91%E7%9A%84%E6%B8%B2%E6%9F%93%EF%BC%88%E4%B8%8A%EF%BC%89/Untitled%2023.png)

一切都是为了subdivision做的事

![最新的Mesh Shader流水线（需要DX12）](06%20%E6%B8%B8%E6%88%8F%E4%B8%AD%E5%9C%B0%E5%BD%A2%E5%A4%A7%E6%B0%94%E5%92%8C%E4%BA%91%E7%9A%84%E6%B8%B2%E6%9F%93%EF%BC%88%E4%B8%8A%EF%BC%89/Untitled%2024.png)

最新的Mesh Shader流水线（需要DX12）

![实时地形模拟](06%20%E6%B8%B8%E6%88%8F%E4%B8%AD%E5%9C%B0%E5%BD%A2%E5%A4%A7%E6%B0%94%E5%92%8C%E4%BA%91%E7%9A%84%E6%B8%B2%E6%9F%93%EF%BC%88%E4%B8%8A%EF%BC%89/Untitled%2025.png)

实时地形模拟

![实时地形模拟所能带来的可交互雪地](06%20%E6%B8%B8%E6%88%8F%E4%B8%AD%E5%9C%B0%E5%BD%A2%E5%A4%A7%E6%B0%94%E5%92%8C%E4%BA%91%E7%9A%84%E6%B8%B2%E6%9F%93%EF%BC%88%E4%B8%8A%EF%BC%89/%E5%8F%AF%E4%BA%A4%E4%BA%92%E9%9B%AA%E5%9C%B0.gif)

实时地形模拟所能带来的可交互雪地

---

## 无高度场地形

![Untitled](06%20%E6%B8%B8%E6%88%8F%E4%B8%AD%E5%9C%B0%E5%BD%A2%E5%A4%A7%E6%B0%94%E5%92%8C%E4%BA%91%E7%9A%84%E6%B8%B2%E6%9F%93%EF%BC%88%E4%B8%8A%EF%BC%89/Untitled%2026.png)

![Untitled](06%20%E6%B8%B8%E6%88%8F%E4%B8%AD%E5%9C%B0%E5%BD%A2%E5%A4%A7%E6%B0%94%E5%92%8C%E4%BA%91%E7%9A%84%E6%B8%B2%E6%9F%93%EF%BC%88%E4%B8%8A%EF%BC%89/Untitled%2027.png)

从顶点着色器中选择一个点删除，传递一个0信息，计算机会通过四叉树算法自动上移/下移相邻的点，自然在最后渲染时就会把所有包含该点的信息删除，但是缺点是会产生锯齿状模型，设计师可以通过创建一个半圆的隧道放进去遮挡掉。

# 地形的材质

![Untitled](06%20%E6%B8%B8%E6%88%8F%E4%B8%AD%E5%9C%B0%E5%BD%A2%E5%A4%A7%E6%B0%94%E5%92%8C%E4%BA%91%E7%9A%84%E6%B8%B2%E6%9F%93%EF%BC%88%E4%B8%8A%EF%BC%89/Untitled%2028.png)

![《幽灵行动：荒野》有11种生物群落，140种地形材质在其中混合](06%20%E6%B8%B8%E6%88%8F%E4%B8%AD%E5%9C%B0%E5%BD%A2%E5%A4%A7%E6%B0%94%E5%92%8C%E4%BA%91%E7%9A%84%E6%B8%B2%E6%9F%93%EF%BC%88%E4%B8%8A%EF%BC%89/Untitled%2029.png)

《幽灵行动：荒野》有11种生物群落，140种地形材质在其中混合

![地形材质混合](06%20%E6%B8%B8%E6%88%8F%E4%B8%AD%E5%9C%B0%E5%BD%A2%E5%A4%A7%E6%B0%94%E5%92%8C%E4%BA%91%E7%9A%84%E6%B8%B2%E6%9F%93%EF%BC%88%E4%B8%8A%EF%BC%89/Untitled%2030.png)

地形材质混合

通过ALPHA创建权重，设计师通过笔刷就能创建一个混合材质。

![Untitled](06%20%E6%B8%B8%E6%88%8F%E4%B8%AD%E5%9C%B0%E5%BD%A2%E5%A4%A7%E6%B0%94%E5%92%8C%E4%BA%91%E7%9A%84%E6%B8%B2%E6%9F%93%EF%BC%88%E4%B8%8A%EF%BC%89/Untitled%2031.png)

但是混合极不真实

![Untitled](06%20%E6%B8%B8%E6%88%8F%E4%B8%AD%E5%9C%B0%E5%BD%A2%E5%A4%A7%E6%B0%94%E5%92%8C%E4%BA%91%E7%9A%84%E6%B8%B2%E6%9F%93%EF%BC%88%E4%B8%8A%EF%BC%89/Untitled%2032.png)

通过高度图混合材质：把高度信息拿来比较，你的高度高，那么混合权重就高，高度低混合权重就低。

缺点：这种信息切换是01切换（指没有过渡，直接切换），在近处观察没有问题，远景观察过渡会很锐利。

![Untitled](06%20%E6%B8%B8%E6%88%8F%E4%B8%AD%E5%9C%B0%E5%BD%A2%E5%A4%A7%E6%B0%94%E5%92%8C%E4%BA%91%E7%9A%84%E6%B8%B2%E6%9F%93%EF%BC%88%E4%B8%8A%EF%BC%89/Untitled%2033.png)

添加了一个0.2的Bias扰动，如果差异小于图中的0.2，那么这部分还是不要01切换，依然是ALPHA混合的。

![材质贴图组](06%20%E6%B8%B8%E6%88%8F%E4%B8%AD%E5%9C%B0%E5%BD%A2%E5%A4%A7%E6%B0%94%E5%92%8C%E4%BA%91%E7%9A%84%E6%B8%B2%E6%9F%93%EF%BC%88%E4%B8%8A%EF%BC%89/Untitled%2034.png)

材质贴图组

3DTexture需要做多维度插值，所以计算量很大；Texture Array需要告知准确采样哪一层Index，不会做插值。

![视差和位移贴图](06%20%E6%B8%B8%E6%88%8F%E4%B8%AD%E5%9C%B0%E5%BD%A2%E5%A4%A7%E6%B0%94%E5%92%8C%E4%BA%91%E7%9A%84%E6%B8%B2%E6%9F%93%EF%BC%88%E4%B8%8A%EF%BC%89/Untitled%2035.png)

视差和位移贴图

![Untitled](06%20%E6%B8%B8%E6%88%8F%E4%B8%AD%E5%9C%B0%E5%BD%A2%E5%A4%A7%E6%B0%94%E5%92%8C%E4%BA%91%E7%9A%84%E6%B8%B2%E6%9F%93%EF%BC%88%E4%B8%8A%EF%BC%89/Untitled%2036.png)

昂贵的材质混合：当一个材质被多次采样的时候会降低性能；我们只看到一小块地形，但是要加载$100km^2$的地图到内存中。

## 虚拟纹理（Virtual Texture）

![游戏引擎实战中几乎都用这个办法](06%20%E6%B8%B8%E6%88%8F%E4%B8%AD%E5%9C%B0%E5%BD%A2%E5%A4%A7%E6%B0%94%E5%92%8C%E4%BA%91%E7%9A%84%E6%B8%B2%E6%9F%93%EF%BC%88%E4%B8%8A%EF%BC%89/Untitled%2037.png)

游戏引擎实战中几乎都用这个办法

建立一个虚拟纹理index来表示混合好的整个地形场景；

加载的数据也根据LOD的原理还传递信息；

需要预烘培好混合的材质Tile放到物理材质（存到显存）中。

优点：显存占用变小；预烘培好的值可以直接速查。

![前沿技术：虚拟纹理贴图实现，直接存储&DMA（DMA:直接在磁盘中读显存）](06%20%E6%B8%B8%E6%88%8F%E4%B8%AD%E5%9C%B0%E5%BD%A2%E5%A4%A7%E6%B0%94%E5%92%8C%E4%BA%91%E7%9A%84%E6%B8%B2%E6%9F%93%EF%BC%88%E4%B8%8A%EF%BC%89/Untitled%2038.png)

前沿技术：虚拟纹理贴图实现，直接存储&DMA（DMA:直接在磁盘中读显存）

![绘制地形时有一个大家非常注意不到的问题：浮点数精度溢出](06%20%E6%B8%B8%E6%88%8F%E4%B8%AD%E5%9C%B0%E5%BD%A2%E5%A4%A7%E6%B0%94%E5%92%8C%E4%BA%91%E7%9A%84%E6%B8%B2%E6%9F%93%EF%BC%88%E4%B8%8A%EF%BC%89/Untitled%2039.png)

绘制地形时有一个大家非常注意不到的问题：浮点数精度溢出

![Untitled](06%20%E6%B8%B8%E6%88%8F%E4%B8%AD%E5%9C%B0%E5%BD%A2%E5%A4%A7%E6%B0%94%E5%92%8C%E4%BA%91%E7%9A%84%E6%B8%B2%E6%9F%93%EF%BC%88%E4%B8%8A%EF%BC%89/Untitled%2040.png)

![Untitled](06%20%E6%B8%B8%E6%88%8F%E4%B8%AD%E5%9C%B0%E5%BD%A2%E5%A4%A7%E6%B0%94%E5%92%8C%E4%BA%91%E7%9A%84%E6%B8%B2%E6%9F%93%EF%BC%88%E4%B8%8A%EF%BC%89/Untitled%2041.png)

![Untitled](06%20%E6%B8%B8%E6%88%8F%E4%B8%AD%E5%9C%B0%E5%BD%A2%E5%A4%A7%E6%B0%94%E5%92%8C%E4%BA%91%E7%9A%84%E6%B8%B2%E6%9F%93%EF%BC%88%E4%B8%8A%EF%BC%89/Untitled%2042.png)

![Untitled](06%20%E6%B8%B8%E6%88%8F%E4%B8%AD%E5%9C%B0%E5%BD%A2%E5%A4%A7%E6%B0%94%E5%92%8C%E4%BA%91%E7%9A%84%E6%B8%B2%E6%9F%93%EF%BC%88%E4%B8%8A%EF%BC%89/Untitled%2043.png)

当相机和物体数值较大时（从1m到60000km）浮点错误引起的抖动。

一个浮点占用32bit存储数据其实是非常少的，当要remap到一个极大的物体时，就会发生这种错误，当然我们可以使用double甚至两个double的格式来存储数据，但是只要被remap的物体够大，这种情况就必然会发生。

![解决办法：相机相对渲染](06%20%E6%B8%B8%E6%88%8F%E4%B8%AD%E5%9C%B0%E5%BD%A2%E5%A4%A7%E6%B0%94%E5%92%8C%E4%BA%91%E7%9A%84%E6%B8%B2%E6%9F%93%EF%BC%88%E4%B8%8A%EF%BC%89/Untitled%2044.png)

解决办法：相机相对渲染

从世界空间坐标转换为相机坐标，然后把相机坐标设置为0，就能渲染整个银河啦！

---

# 植被、道路和贴画等

![Untitled](06%20%E6%B8%B8%E6%88%8F%E4%B8%AD%E5%9C%B0%E5%BD%A2%E5%A4%A7%E6%B0%94%E5%92%8C%E4%BA%91%E7%9A%84%E6%B8%B2%E6%9F%93%EF%BC%88%E4%B8%8A%EF%BC%89/Untitled%2045.png)

![LOD思路表达的树；插片、Billboard](06%20%E6%B8%B8%E6%88%8F%E4%B8%AD%E5%9C%B0%E5%BD%A2%E5%A4%A7%E6%B0%94%E5%92%8C%E4%BA%91%E7%9A%84%E6%B8%B2%E6%9F%93%EF%BC%88%E4%B8%8A%EF%BC%89/Untitled%2046.png)

LOD思路表达的树；插片、Billboard

![装饰物渲染](06%20%E6%B8%B8%E6%88%8F%E4%B8%AD%E5%9C%B0%E5%BD%A2%E5%A4%A7%E6%B0%94%E5%92%8C%E4%BA%91%E7%9A%84%E6%B8%B2%E6%9F%93%EF%BC%88%E4%B8%8A%EF%BC%89/Untitled%2047.png)

装饰物渲染

![道路和贴花系统](06%20%E6%B8%B8%E6%88%8F%E4%B8%AD%E5%9C%B0%E5%BD%A2%E5%A4%A7%E6%B0%94%E5%92%8C%E4%BA%91%E7%9A%84%E6%B8%B2%E6%9F%93%EF%BC%88%E4%B8%8A%EF%BC%89/Untitled%2048.png)

道路和贴花系统

道路最常见的想法：样条Spline系统；道路一旦拉出来调整就要对高度场进行侵蚀等模拟。

道路和贴花抖一股脑放到虚拟纹理VT中，同样是空间换时间，都提前预计算好在VT中。

![之前的绘制都需要手绘，现如今可以使用程序化的方法来分布植被和材质等](06%20%E6%B8%B8%E6%88%8F%E4%B8%AD%E5%9C%B0%E5%BD%A2%E5%A4%A7%E6%B0%94%E5%92%8C%E4%BA%91%E7%9A%84%E6%B8%B2%E6%9F%93%EF%BC%88%E4%B8%8A%EF%BC%89/Untitled%2049.png)

之前的绘制都需要手绘，现如今可以使用程序化的方法来分布植被和材质等